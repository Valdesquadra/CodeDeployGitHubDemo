/**
 *
 * @package    local_mb2builder
 * @copyright  2018 - 2020 Mariusz Boloz (https://mb2themes.com/)
 * @license    Commercial https://themeforest.net/licenses
 */
jQuery(document).ready(function(t){var a=t("#mb2-pb-lang");function e(a,e){var s=e.find(".owl-carousel"),r=e;a.attr("data-selector")&&(r=e.find(a.attr("data-selector"))),s.length?(s.each(function(){t(this).owlCarousel("destroy")}),e.attr("data-"+a.attr("data-attrname"),a.val()),a.attr("data-ignorecarousel")&&(a.attr("data-class_remove")&&r.removeClass(a.attr("data-class_remove")),r.addClass(a.attr("data-class_prefix")+a.val())),s.each(function(){n(t(this))})):(a.attr("data-class_remove")&&r.removeClass(a.attr("data-class_remove")),r.addClass(a.attr("data-class_prefix")+a.val()))}t(document).on("click",".mb2-pb-element",function(t){t.preventDefault()}),t(document).on("click",".mb2-pb-insert-image",function(a){a.preventDefault();var e=t(".mb2-pb-row-active");e.hasClass("parallax1")&&e.jarallax("destroy");var s=t(this).data("imgurl"),r=t(".mb2_pb_input_image_url_active");r.val(s),t(".mb2_pb_input_image_url_active").closest(".mb2-pb-form-group").removeClass("isvideo"),2==local_mb2builder_check_image(s)&&t(".mb2_pb_input_image_url_active").closest(".mb2-pb-form-group").addClass("isvideo");var o=t(".mb2_pb_input_image_url_active").closest(".mb2-pb-form-group").find(".mb2-pb-preview-image");o.show(),o.attr("src",s);var n=r.closest(".mb2-pb-modal").data("type");local_mb2builder_image_action(s,r,n),e.hasClass("parallax1")&&i(e)}),t(document).on("change",'input[name="mb2_pb_input_image_url"]',function(a){var e=t(this).val(),s=t(".mb2-pb-row-active");s.hasClass("parallax1")&&s.jarallax("destroy"),t(this).closest(".mb2-pb-form-group").removeClass("isvideo"),2==local_mb2builder_check_image(e)&&t(this).closest(".mb2-pb-form-group").addClass("isvideo");var r=t(this).closest(".mb2-pb-form-group").find(".mb2-pb-preview-image");r.show(),r.attr("src",e);var o=t(this).closest(".mb2-pb-modal").data("type");""===t(this).val()?(local_mb2builder_image_remove_action(t(this),o),r.hide(),r.attr("src","")):(local_mb2builder_image_action(e,t(this),o),s.hasClass("parallax1")&&i(s))}),t(document).on("click",".mb2-pb-remove-image",function(a){a.preventDefault();var e=t(".mb2-pb-row-active");e.hasClass("parallax1")&&e.jarallax("destroy"),t(this).closest(".mb2-pb-form-group").removeClass("isvideo");var s=t(this).closest(".mb2-pb-form-group").find('input[name="mb2_pb_input_image_url"]');s.val("");var r=t(this).closest(".mb2-pb-form-group").find(".mb2-pb-preview-image");r.hide(),r.attr("src","");var o=s.closest(".mb2-pb-modal").data("type");local_mb2builder_image_remove_action(s,o)}),t(document).on("click",".mb2-pb-builder-toggle",function(a){a.preventDefault(),t(this).closest(".mb2-pb-container").find(".mb2-pb-builder-toggle-content").slideToggle(250),t(this).toggleClass("active")}),t(".mb2-pb-accordion").each(function(){var a=t(this);a.find('[data-toggle="collapse"]').each(function(){t(this).on("click",function(){t(this).hasClass("collapsed")?a.attr("data-accordion_active",t(this).index('[data-toggle="collapse"]')+1):a.attr("data-accordion_active",0),c()})})});var s;t(".mb2-pb-sortable-columns");function r(){o("section"),o("row"),o("column"),o("element"),o("subelement"),o("tab")}function o(a){var e=t(".mb2-pb-sortable-"+a+"s");(function t(){return"function"==typeof e.sortable||(setTimeout(t,100),!1)})()&&e.sortable({axis:"element"!==a&&"subelement"!==a&&("column"===a?"x":"y"),placeholder:"ui-state-highlight",forcePlaceholderSize:!0,handle:"."+a+"-drag-handle",connectWith:"column"!==a&&"subelement"!==a&&"tab"!==a&&".mb2-pb-sortable-"+a+"s",opacity:.95,start:function(a,s){var r=t(s.item).outerHeight(!0),o=t(s.item).outerWidth(!0);e.find(">.ui-state-highlight").addClass(t(s.item).attr("class")),e.find(">.ui-state-highlight").css("height",r),e.find(">.ui-state-highlight").css("width",o)},stop:function(a,e){if(e.item.closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&function(a){var e=a.closest(".mb2-pb-element").find(".owl-carousel"),s=[],r=0;for(e.owlCarousel("destroy"),a.closest(".mb2-pb-element").find(".mb2-pb-carousel_item").each(function(){s[r]=t(this).attr("data-pbid"),r++}),x=0;x<s.length;x++){var o=e.find('.mb2-pb-carousel-item[data-pbid="'+s[x]+'"]');e.append(o)}n(e)}(e.item),e.item.hasClass("mb2-pb-carousel")){var s=e.item.find(".owl-carousel");s.owlCarousel("destroy"),n(s)}c()}})}function i(t){(function a(){return"function"==typeof t.jarallax||(setTimeout(a,100),!1)})()&&t.jarallax({speed:.6})}function n(a){var e=a.closest(".mb2-pb-element"),s=e.attr("data-columns"),r=0!=e.attr("data-sloop"),o=0!=e.attr("data-snav"),i=0!=e.attr("data-sdots"),n=0!=e.attr("data-autoplay"),l=e.attr("data-pausetime"),d=e.attr("data-animtime"),c=e.attr("data-mobcolumns"),m=30;"thin"===e.attr("data-gutter")?m=10:"none"===e.attr("data-gutter")&&(m=0);var b=s>3?3:s,p=s>5?5:s,u={0:{items:1},600:{items:s>2?2:s},780:{items:b},1000:{items:p}};1==c&&(u={0:{items:2},600:{items:b},780:{items:p},1000:{items:p}});var f=!1,h=['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'];t("body").hasClass("dir-rtl")&&(f=!0,h=['<i class="fa fa-angle-right"></i>','<i class="fa fa-angle-left"></i>']),function t(){return"function"==typeof a.owlCarousel||(setTimeout(t,100),!1)}()&&a.owlCarousel({margin:m,loop:r,nav:o,rtl:f,dots:i,autoplay:n,responsive:u,autoplayHoverPause:!0,autoplayTimeout:l,smartSpeed:d,navText:h})}function l(a,e){a.find(".mb2-pb-animnum_item").each(function(){var a=t(this),s=!0;e?d(a):a.bind("inview",function(t,e){e&&s&&(s=!1,setTimeout(function(){d(a)},350))})})}function d(t){var a=t.find(".pbanimnum-number"),e=t.closest(".mb2-pb-animnum").attr("data-aspeed");e=Number(e),t.prop("Counter",0).stop().animate({Counter:t.attr("data-number")},{duration:e,easing:"swing",step:function(t){a.text(this.Counter.toFixed())}})}function c(){var a=t("#mb2-pb-form-democontent"),e=a.attr("data-url"),s=JSON.stringify(D(!1));t("#democontent").val(s),t.ajax({type:"POST",url:e,data:a.serialize(),beforeSend:function(){},error:function(t,a,e){},success:function(t){}})}function m(t){var a="";if("object"==typeof t){for(const[e,s]of Object.entries(t))"col"!==e&&(a+=s?" data-"+e+'="'+s+'"':"");return a}}function b(t){var a="";if("object"==typeof t){a+=' style="';for(const[e,s]of Object.entries(t))"bgimage"!==e&&"height"!==e||!s||(a+="bgimage"===e?"background-image:url('"+s+"');":"",a+="height"===e?"min-height:"+s+"px;":"");return a+='"'}}function p(t){var a=0,e="",s=[{name:"mobcenter",prefix:"mobcenter"},{name:"align",prefix:"align-"},{name:"scheme",prefix:""},{name:"custom_class",prefix:""}];for(a=0;a<s.length;a++)void 0!==t&&(e+=" "+s[a].prefix+t[s[a].name]);return e}function u(e){var s,r="",o=[12],i=[],n=[],l=[],d=[],c=[],u=0,f=0;12!==e&&(o=e.split(","));var h=t(".mb2-pb-row-active");for((s=h.length)&&h.find(".mb2-pb-column").each(function(a,e){i[a]=t(this).find(".mb2-pb-sortable-elements").html(),n[a]=T(t(this)),l[a]=t(this).attr("style"),d[a]=t(this).find(".column-inner").attr("style"),c[a]=t(this).find(".column-inner-bg").attr("style")}),f=0;f<o.length;f++){if(r+='<div class="mb2-pb-column col-md-'+o[f]+p(n[f])+'" data-col="'+o[f]+'"'+m(n[f])+b(n[f])+">",r+='<div class="column-helper"></div>',r+='<div class="mb2-pb-actions">',r+="<span>"+a.data("col")+"</span>",r+='<span href="#" class="column-drag-handle" title="'+a.data("move")+'">',r+='<i class="fa fa-arrows"></i> ',r+="</span>",r+='<a href="#" class="settings-column" title="'+a.data("settings")+'" data-toggle="modal" data-target="#mb2-pb-modal-settings-column">',r+='<i class="fa fa-pencil"></i> ',r+="</a>",r+="</div>",r+='<div class="column-inner" style="'+(d[f]?d[f]:"padding-bottom:30px")+'">',r+='<div class="mb2-pb-sortable-elements clearfix">',s&&f==o.length-1){if(i.length>f)for(u=f;u<i.length;u++)r+=i[u]}else i[f]&&(r+=i[f]);r+="</div>",r+="</div>",r+='<div class="mb2-pb-column-footer">',r+='<a href="#" class="mb2-pb-add-element" title="'+a.data("addelement")+'" data-toggle="modal" data-target="#mb2-pb-modal-elements">&plus; '+a.data("addelement")+"</a>",r+="</div>",r+='<div class="column-inner-bg" style="'+c[f]+'"></div>',r+="</div>"}return r}function f(a){var e=(new Date).getTime(),s=0,r=0,o=[];a.find(".owl-carousel").owlCarousel("destroy"),a.find(".mb2-pb-carousel-item").each(function(){o[++s]=e+s,t(this).attr("data-pbid",e+s)}),a.find(".mb2-pb-subelement").each(function(){r++,t(this).attr("data-pbid",o[r])}),n(a.find(".owl-carousel"))}function h(a){var e=(new Date).getTime(),s=0;a.attr("id","theme-accordion-"+e),a.find(".mb2-pb-accordion_item").each(function(){s++,t(this).find("[data-parent]").attr("data-parent","#theme-accordion-"+e),t(this).find('[data-toggle="collapse"]').attr("data-target","#accordion-item-"+e+s),t(this).find('[data-toggle="collapse"]').attr("aria-controls","#accordion-item-"+e+s),t(this).find(".collapse").attr("id","accordion-item-"+e+s)})}function v(a,e){var s=(new Date).getTime(),r=0;e?a.find(".nav-link").each(function(){r++;var a=t(this).attr("aria-controls");t(this).attr("href","#tab-"+s+r),t(this).attr("aria-controls","tab-"+s+r);var e=t(this).closest(".mb2-pb-tabs").find('[id="'+a+'"]');e.attr("id","tab-"+s+r),e.attr("aria-labelledby","tab-"+s+r)}):(a.find(".nav-link").attr("href","#tab-"+s),a.find(".nav-link").attr("aria-controls","tab-"+s),a.find(".tab-pane").attr("id","tab-"+s),a.find(".tab-pane").attr("aria-labelledby","tab-"+s))}function g(a,e){a.closest(".mb2-pb-tabs").find(".nav-link").removeClass("active"),a.closest(".mb2-pb-tabs").find(".tab-pane").removeClass("active"),e.addClass("active"),t('[id="'+e.attr("aria-controls")+'"]').addClass("active")}function y(e){if(t("body").hasClass("modal-open"))return alert(a.data("cantopenmodal")),e.stopImmediatePropagation()}function _(){t(".mb2-pb-section").removeClass("mb2-pb-section-active"),t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(".mb2-pb-column").removeClass("mb2-pb-column-active"),t(".mb2-pb-element").removeClass("mb2-pb-element-active"),t(".mb2-pb-subelement").removeClass("mb2-pb-subelement-active")}function C(a,s,o){var l=a.closest(".mb2-pb-"+s),d=(new Date).getTime();_(),l.addClass("mb2-pb-"+s+"-active"),t("#mb2-pb-modal-settings-"+s).find(".modal-body").empty();var c=t("#tab-settings-"+s+o).clone(!0),m=t("#mb2-pb-modal-settings-"+s).find(".modal-body").append(c);m.find(".nav-tabs a").each(function(){t(this).attr("href",t(this).attr("href")+"_modal")}),m.find(".tab-pane").each(function(){t(this).attr("id",t(this).attr("id")+"_modal")}),m.find(".mb2-pb-radio-el").each(function(){var a=t(this).attr("data-valid")+"_"+d;t(this).find("input").attr("id",a),t(this).find("label").attr("for",a)});var b=m.find(".mb2-pb-editor");b.length>0&&(t(".mb2-pb-editor").removeClass("mb2-pb-active-editor"),t(".mb2-pb-editor-document").removeAttr("contenteditable"),t(".mb2-pb-editor-document").removeClass("mb2-pb-editor-document-active"),t(".mb2-pb-editor-document").attr("id","mb2-pb-editor-document-active"),b.addClass("mb2-pb-active-editor"),m.find(".mb2-pb-editor-document").attr("contenteditable","true"),m.find(".mb2-pb-editor-document").addClass("mb2-pb-editor-document-active"),m.find(".mb2-pb-editor-document").removeAttr("id")),m.find(".mb2-pb-input").each(function(){var a,s=t(this),o=l.attr("data-"+s.attr("data-attrname"));(void 0!==(o=function(t){if(void 0===t)return;if("number"==typeof t)return t;return t.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}(o))&&("radio"===s.attr("type")?(s.prop("checked",!1),s.attr("value")==o&&(s.closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),s.prop("checked",!0),s.closest(".mb2-pb-radio-el").addClass("checked"))):s.val(o)),s.hasClass("mb2-pb-editor-input")&&local_mb2builder_helper_editor_init(o,s,l),s.hasClass("mb2-pb-input-type-icon"))&&((a=o||s.val())&&(s.closest(".mb2-pb-form-group").find("i").attr("class",a),s.closest(".mb2-pb-form-group").find("i").show()));s.hasClass("mb2-pb-input-type-image")&&((a=o||s.val())&&(s.closest(".mb2-pb-form-group").removeClass("isvideo"),2==local_mb2builder_check_image(a)&&s.closest(".mb2-pb-form-group").addClass("isvideo"),s.closest(".mb2-pb-form-group").find("img").attr("src",a),s.closest(".mb2-pb-form-group").find("img").show()));!function(a,s){switch(a.attr("data-action")){case"style":return function(a,e){var s="change",r="px",o=!1,i=e;a.attr("data-parent")&&(i=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var n=i;a.attr("data-changemode")&&(s=a.attr("data-changemode"));a.attr("data-style_suffix")&&"rem"===(r=a.attr("data-style_suffix"))&&(o=!0);"none"===r&&(r="");a.attr("data-selector")&&(n=i.find(a.attr("data-selector")));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(s,function(){n.css(t(this).attr("data-style_properity"),t(this).val()+r),t(this).attr("data-style_properity2")&&n.css(t(this).attr("data-style_properity2"),t(this).val()+r),t(this).attr("data-numclass")&&function(a,e,s){var r=[0,50,100,150,200,250],o=0,i=a.attr("data-sizepref")+"-";s&&(r=[1,2,3,4,5]);"column"===a.attr("data-numclasselector")&&(e=t(".mb2-pb-column-active"));for(o=0;o<r.length;o++){var n=s?a.val()>r[o]:a.val()>=r[o];n&&(e.removeClass(i+r.join(" "+i)),e.addClass(i+r[o]),a.attr("data-numclassattr")&&e.attr("data-"+a.attr("data-numclassattr"),r[o]),a.attr("data-setval")&&t(".modal.show").find('[data-attrname="'+a.attr("data-setval")+'"]').val(r[o]))}}(t(this),n,o),e.attr("data-"+t(this).attr("data-attrname"),t(this).val()),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})}(a,s);case"color":return function(t,a){t.focus(),t.spectrum({showInput:!0,showButtons:!1,preferredFormat:"rgb",allowEmpty:!0,color:"",showAlpha:!0,change:function(e){k(e,t,a)},move:function(e){k(e,t,a)}})}(a,s);case"class":return function(a,s){var o="change";a.attr("data-changemode")&&(o=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(o,function(){var o=s;t(this).attr("data-parent")&&(o=s.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]'));var n=o;t(this).attr("data-selector")&&(n=o.find(t(this).attr("data-selector"))),s.attr("data-"+a.attr("data-attrname"),t(this).val()),s.attr("data-carousel")&&!s.hasClass("mb2-pb-coursetabs")||s.hasClass("mb2-pb-blog")&&3==s.attr("data-layout")?e(t(this),s):function(t,a,e){t.attr("data-class_remove")&&(e.removeClass(t.attr("data-class_remove")),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).removeClass(t.attr("data-class_remove")));a.attr("data-"+t.attr("data-attrname"),t.val()),e.addClass(t.attr("data-class_prefix")+t.val()),t.attr("data-selector2")&&a.find(t.attr("data-selector2")).addClass(t.attr("data-class_prefix")+t.val());if(a.hasClass("mb2-pb-list")&&"style"===t.attr("data-attrname")){var s=a.find("ol");"number"===t.val()&&(e.replaceWith('<ol class="'+e.attr("class")+'">'+e.html()+"</ol>"),r()),"number"!==t.val()&&s.length&&(s.replaceWith('<ul class="'+s.attr("class")+'">'+s.html()+"</ul>"),r())}}(t(this),s,n),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked")),"parallax"===t(this).attr("data-attrname")&&1==t(this).val()?i(s):"parallax"===t(this).attr("data-attrname")&&0==t(this).val()&&s.jarallax("destroy"),"graddeg"===t(this).attr("data-attrname")&&s.find(".rowgrad").attr("style","background-image:linear-gradient("+t(this).val()+"deg,"+s.attr("data-gradcolor1")+","+s.attr("data-gradcolor2"))})}(a,s);case"text":return function(a,e){a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var s=a;t(this).attr("data-selector")&&(s=a.find(t(this).attr("data-selector")));var r=local_mb2builder_strip_html(t(this).val());r=local_mb2builder_replace_text(r),""===t(this).val()&&t(this).attr("data-default")&&(r=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),r),s.html(r)})}(a,s);case"attribute":return function(a,e){"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on("input",function(){var a=e;t(this).attr("data-parent")&&(a=e.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+e.attr("data-pbid")+'"]'));var s=a;t(this).attr("data-selector")&&(s=a.find(t(this).attr("data-selector")));var r=local_mb2builder_strip_html(t(this).val());r=local_mb2builder_replace_text(r),""===t(this).val()&&t(this).attr("data-default")&&(r=t(this).attr("data-default")),e.attr("data-"+t(this).attr("data-attrname"),r),s.attr(t(this).attr("data-attribute"),r),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val())})}(a,s);case"callback":return function(a,s){var r="change";a.attr("data-changemode")&&(r=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(r,function(){"carousel"===t(this).attr("data-callback")?e(t(this),s):"layout-carousel"===t(this).attr("data-callback")?function(t,a){var e=a.find(".mb2-pb-content-list");a.attr("data-"+t.attr("data-attrname"),t.val()),1==t.val()?(e.removeClass("theme-boxes"),e.removeClass("theme-col-"+a.attr("data-columns")),e.removeClass("gutter-"+a.attr("data-gutter")),e.addClass("owl-carousel"),n(e)):(e.owlCarousel("destroy"),e.removeClass("owl-carousel"),e.addClass("theme-boxes"),e.addClass("theme-col-"+a.attr("data-columns")),e.addClass("gutter-"+a.attr("data-gutter")))}(t(this),s):"accordion-parent"===t(this).attr("data-callback")&&function(t,a){var e=a.attr("id"),s=a.find('[data-toggle="collapse"]'),r=a.find(".collapse");1==t.val()?(s.attr("data-parent","#"+e),r.attr("data-parent","#"+e)):(s.attr("data-parent",""),r.attr("data-parent",""))}(t(this),s),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a,s);case"ajax":return function(a,e){var s="change";a.attr("data-changemode")&&(s=a.attr("data-changemode"));"range"===a.attr("type")&&a.closest(".form-group").find(".numval").html(a.val());a.on(s,function(){var a=e.find(".mb2-pb-content-list"),s=e.find(".videowebiframe");t(this).attr("data-advlayout")&&(3==t(this).val()?(a.removeClass("theme-boxes"),a.removeClass("theme-col-"+e.attr("data-columns")),a.removeClass("gutter-"+e.attr("data-gutter")),a.addClass("owl-carousel"),n(a)):(a.owlCarousel("destroy"),a.removeClass("owl-carousel"),a.addClass("theme-boxes"),a.addClass("theme-col-"+e.attr("data-columns")),a.addClass("gutter-"+e.attr("data-gutter"))),a.removeClass("layout1"),a.removeClass("layout2"),a.removeClass("layout3"),a.addClass("layout"+t(this).val())),e.attr("data-"+t(this).attr("data-attrname"),t(this).val());var r=T(e);r=jQuery.param(r);var o=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/"+e.attr("data-id")+".php?"+r+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t.ajax({url:o,type:"get",dataType:"html",beforeSend:function(){e.find(".mb2-pb-actions-loading").fadeIn(150)},error:function(t,a,e){},success:function(t){"coursetabs"===e.attr("data-id")?e.find(".mb2-pb-element-inner").html(t):a.length&&a.html(t),s.length&&s.attr("src",t);var r=e.find(".owl-carousel");r.length&&(r.owlCarousel("destroy"),n(r)),setTimeout(function(){e.find(".mb2-pb-actions-loading").fadeOut(150)},350)}}),"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a,s);case"none":return function(a,e){var s="change";a.attr("data-changemode")&&(s=a.attr("data-changemode"));a.on(s,function(){"range"===t(this).attr("type")&&t(this).closest(".form-group").find(".numval").html(t(this).val()),"radio"===t(this).attr("type")&&(t(this).closest(".mb2-pb-radioform-group").find(".mb2-pb-radio-el").removeClass("checked"),t(this).closest(".mb2-pb-radio-el").addClass("checked"))})}(a);case"data":(function(a,e){a.on("input",function(){e.attr("data-"+t(this).attr("data-attrname"),t(this).val())})})(a,s)}}(s,l)});var p=t(".mb2-pb-"+s+"-active").attr("data-elname");t("#mb2-pb-modal-settings-"+s).find(".modal-title").text(p),m.find("[data-showon_field2]").each(function(){var a=t(this),e=a.attr("data-showon_field2"),s=a.attr("data-showon_value2").toString().split("|"),r=l.closest(".mb2-pb-element").attr("data-"+e),o=t.inArray(r,s);t('[data-showon_field2="'+e+'"]').closest(".form-group").hide(),-1!=o&&t('[data-showon_field2="'+e+'" ][data-showon_value2*="'+r+'"]').closest(".form-group").show()}),m.find("[data-showon_field]").each(function(){var a=t(this),e=a.attr("data-showon_field"),s=a.attr("data-showon_value").toString().split("|"),r=m.find('[data-attrname="'+e+'"]'),o=r.val();"radio"===r.attr("type")&&(o=m.find('[data-attrname="'+e+'"]:checked').val()),t('[data-showon_field="'+e+'"]').closest(".form-group").hide();var i=t.inArray(o,s);-1!=i&&t('[data-showon_field="'+e+'" ][data-showon_value*="'+o+'"]').closest(".form-group").show(),t(document).on("change",'[data-attrname="'+e+'"]',function(){i=t.inArray(t(this).val(),s),t('[data-showon_field="'+e+'"]').closest(".form-group").hide(),-1!=i&&t('[data-showon_field="'+e+'" ][data-showon_value*="'+t(this).val()+'"]').closest(".form-group").show()})})}function w(a){t("#mb2-pb-modal-settings-"+a).find(".mb2-pb-input").each(function(){var e=t(this),s=t(".mb2-pb-"+a+"-active"),r=e.attr("data-attrname"),o=e.val();if(e.hasClass("mb2-pb-editor-input")&&(local_mb2builder_helper_editor_update_from_textarea_before_save(),o=local_mb2builder_helper_editor_get_clean_html()),"text"===e.attr("data-action")&&(o=local_mb2builder_strip_html(o),o=local_mb2builder_replace_text(o)),"radio"===e.attr("type")?e.is(":checked")&&s.attr("data-"+r,o):s.attr("data-"+r,o),"sectionlang"===r||"rowlang"===r){var i="",n="";""!==o&&(i="(",n=")"),s.find(">div>.mb2-pb-language").text(i+o+n)}if("sectionaccess"===r||"rowaccess"===r){var l="";1==o?l='<i class="fa fa-lock"></i>':2==o&&(l='<i class="fa fa-unlock"></i>'),s.find(">div>.mb2-pb-access").html(l)}r===a+"hidden"&&(1==o?s.addClass("hiddenel"):s.removeClass("hiddenel"))}),_()}function k(a,e,s){var r="",o="";a&&(r=a.toRgbString());var i=s;e.attr("data-parent")&&(i=s.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]'));var n=i;if(e.attr("data-selector")&&(n=i.find(e.attr("data-selector"))),e.attr("data-selector2")&&(o=i.find(e.attr("data-selector2"))),e.attr("data-colorclass")&&r?n.addClass("color1"):n.removeClass("color1"),e.attr("data-globalparent"))s.find(".mb2-pb-subelement").each(function(){t(this).attr("data-"+e.attr("data-attrname"))||t(this).find(e.attr("data-selector")).css(e.attr("data-style_properity"),r)});else if(e.attr("data-globalchild")&&!r){var l=s.closest(".mb2-pb-element");n.css(e.attr("data-style_properity"),l.attr("data-"+e.attr("data-attrname")))}else{if(s.attr("data-"+e.attr("data-attrname"),r),n.css(e.attr("data-style_properity"),r),s.hasClass("mb2-pb-row")&&"bgcolor"===e.attr("data-attrname")&&(s.find(".hero-img-grad.grad-left").attr("style","background-image:linear-gradient(to right,"+r+",rgba(255,255,255,0));"),s.find(".hero-img-grad.grad-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+r+");")),i.hasClass("mb2-pb-carousel-item")&&"ocolor"===e.attr("data-attrname")&&(i.find(".slidehero-img-grad.grad-left").attr("style","background-image:linear-gradient(to right,"+r+",rgba(255,255,255,0));"),i.find(".slidehero-img-grad.grad-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+r+");")),s.hasClass("mb2-pb-boxesimg_item")&&"color"===e.attr("data-attrname")&&(s.find(".theme-boximg-imgel .gradient-left").attr("style","background-image:linear-gradient(to right,"+r+",rgba(255,255,255,0));"),s.find(".theme-boximg-imgel .gradient-right").attr("style","background-image:linear-gradient(to right,rgba(255,255,255,0),"+r+");")),s.hasClass("mb2-pb-row")&&"gradcolor1"===e.attr("data-attrname")){var d=s.attr("data-graddeg"),c=s.attr("data-gradcolor2");s.find(".rowgrad").attr("style","background-image:linear-gradient("+d+"deg,"+r+","+c)}if(s.hasClass("mb2-pb-row")&&"gradcolor2"===e.attr("data-attrname")){d=s.attr("data-graddeg");var m=s.attr("data-gradcolor1");s.find(".rowgrad").attr("style","background-image:linear-gradient("+d+"deg,"+m+","+r)}e.attr("data-style_properity2")&&n.css(e.attr("data-style_properity2"),r),e.attr("data-selector2")&&o.css(e.attr("data-style_properity"),r)}}function D(a){var e=[];return(a?t("#mb2-pb-demo-iframe").contents().find(".mb2-pb-container"):t(".mb2-pb-container")).each(function(a){var s=t(this),r=a,o=T(s);delete o.sortableItem,e[r]={type:"mb2pb_page",settings:o,attr:[]},s.find(".mb2-pb-section").each(function(a){var s=t(this),o=a,i=T(s);delete i.sortableItem,e[r].attr[o]={type:"mb2pb_section",settings:i,attr:[]},s.find(".mb2-pb-row").each(function(a){var s=t(this),i=a,n=T(s);delete n.sortableItem,e[r].attr[o].attr[i]={type:"mb2pb_row",settings:n,attr:[]},s.find(".mb2-pb-column").each(function(a){var s=t(this),n=a,l=T(s);delete l.sortableItem,e[r].attr[o].attr[i].attr[n]={type:"mb2pb_col",settings:l,attr:[]},s.find(".mb2-pb-element").each(function(a){var s=t(this),l=a,d=T(s);delete d.sortableItem,e[r].attr[o].attr[i].attr[n].attr[l]={type:"mb2pb_el",settings:d,attr:[]},s.find(".mb2-pb-subelement").each(function(a){var s=a,d=T(t(this));delete d.sortableItem,e[r].attr[o].attr[i].attr[n].attr[l].attr[s]={type:"mb2pb_subel",settings:d,attr:[]}})})})})})}),e}function T(a){var e={};return t.each(a[0].attributes,function(){this.name.includes("data-")&&!this.name.includes("data-jarallax-")&&this.specified&&(e[this.name.replace("data-","")]=local_mb2builder_replace_text(this.value))}),e}r(),t(".mb2-pb-container .parallax1").each(function(){i(t(this))}),t(".mb2-pb-container .owl-carousel").each(function(){n(t(this))}),t("#page-admin-local-mb2builder-edit-page .mform").on("submit",function(){var a=JSON.stringify(D(!0));t('[name="content"]').val(a),t('[name="democontent"]').val(a)}),t(".mb2-pb-animnum_item").each(function(){l(t(this).closest(".mb2-pb-animnum"),!1)}),t(document).on("click",".mb2-pb-animnum-run",function(a){a.preventDefault();var e=t(".mb2-pb-animnum.mb2-pb-element-active");e.find(".pbanimnum-number").text("0"),l(e,!0)}),(s=t("#mb2-pb-form-savelayout")).on("submit",function(e){if(e.preventDefault(),!t("#savelayoutname").val()&&0==t("#editlayoutid").val())return t("#savelayoutname").css("border-color","red"),t("#savelayoutname").closest("div").find(".mb2-pb-error").show(),null;t("#savelayoutname").attr("style",""),t("#savelayoutname").closest("div").find(".mb2-pb-error").hide();var r=t(this).find(".btn");r.val(a.data("processing")),r.attr("disabled","disabled");var o=t(this).attr("data-url"),i=JSON.stringify(D(!1));t("#savelayoutcontent").val(i),t.ajax({type:"POST",url:o,data:t(this).serialize(),beforeSend:function(){},error:function(t,a,e){t.status,t.statusText},success:function(e){setTimeout(function(){r.removeAttr("disabled"),r.val(a.data("selectlayout")),t("#savelayoutname").val(""),t("#editlayoutid").val(0),s.find(".mb2-pb-success").show(),setTimeout(function(){s.find(".mb2-pb-success").hide()},1e4)},600)}})}),function(){var e=t("#mb2-pb-form-importlayout");e.on("submit",function(s){s.preventDefault();var o=t('[name="importlayoutkeep"]');if(0==t("#importlayoutid").val())return t("#importlayoutid").css("border-color","red"),t("#importlayoutid").closest("div").find(".mb2-pb-error").show(),null;t("#importlayoutid").attr("style",""),t("#importlayoutid").closest("div").find(".mb2-pb-error").hide(),t(".mb2-pb-overlay.main-overlay").fadeIn(180);var d=t(this).find(".btn");d.val(a.data("processing")),d.attr("disabled","disabled");var m=t(this).attr("data-url");t.ajax({type:"POST",url:m,data:t(this).serialize(),dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(s){t("#importlayoutid").val(0),o.prop("checked")?t(".mb2-pb-container").first().find(".mb2-pb-sortable-sections").append(s):t(".mb2-pb-container").first().find(".mb2-pb-sortable-sections").html(s),c(),t(".mb2-pb-overlay.main-overlay").fadeOut(180),r(),t(".mb2-pb-container").find(".owl-carousel").each(function(){n(t(this))}),t(".mb2-pb-container").find(".parallax1").each(function(){i(t(this))}),t(".mb2-pb-container").find(".mb2-pb-animnum").each(function(){l(t(this),!1)}),setTimeout(function(){d.removeAttr("disabled"),d.val(a.data("importlayoutbtn")),e.find(".mb2-pb-success").show(),setTimeout(function(){e.find(".mb2-pb-success").hide()},1e4)},600)}})})}(),t(document).on("click",".mb2-pb-import-part",function(a){a.preventDefault();var e=t(this).attr("data-part"),s=T(t(this));s=jQuery.param(s);var o=t(".mb2-pb-settings").data("baseurl")+"/local/mb2builder/ajax/import-blocks.php?"+s+"&sesskey="+t(".mb2-pb-settings").attr("data-sesskey");t(".mb2-pb-overlay.main-overlay").fadeIn(180),t.ajax({url:o,type:"get",dataType:"html",beforeSend:function(){},error:function(t,a,e){},success:function(a){"layouts"===e?t(".mb2-pb-container").find(".mb2-pb-sortable-sections").html(a):t(".mb2-pb-section").first().find(".mb2-pb-sortable-rows").append(a),c(),t(".mb2-pb-overlay.main-overlay").fadeOut(180),r(),t(".mb2-pb-container").find(".owl-carousel").each(function(){n(t(this))}),t(".mb2-pb-container").find(".parallax1").each(function(){i(t(this))}),t(".mb2-pb-container").find(".mb2-pb-animnum").each(function(){l(t(this),!1)})}})}),t(document).on("click",".mb2-pb-page-cancel, .mb2-pb-modal .close",function(a){var e;e=window.parent.$("#mb2-pb-demo-iframe"),t(".mb2-pb-overlay.main-overlay").fadeIn(180),e.attr("src",e.attr("src"))}),t(document).on("click",".mb2-pb-row-toggle,.layout-row",function(a){a.preventDefault(),t(".mb2-pb-section").removeClass("mb2-pb-section-active"),t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(this).closest(".mb2-pb-section").addClass("mb2-pb-section-active"),t("#mb2-pb-modal-row-layout").find(".mb2-pb-row-variant").removeClass("update"),t(this).hasClass("layout-row")&&(t(".mb2-pb-row").removeClass("mb2-pb-row-active"),t(this).closest(".mb2-pb-row").addClass("mb2-pb-row-active"),t("#mb2-pb-modal-row-layout").find(".mb2-pb-row-variant").addClass("update"))}),t(document).on("click",".mb2-pb-row-variant",function(a){a.preventDefault();var e=t(this).data("row_variant"),s=function(a){var e=t(".mb2-pb-template-row").clone();e.removeClass("mb2-pb-template-row");var s=u(a);return e.find(".mb2-pb-sortable-columns").append(s),e}(e),o=t(".mb2-pb-section-active").find(".mb2-pb-sortable-rows");t(this).hasClass("update")&&((o=t(".mb2-pb-row-active").find(".mb2-pb-sortable-columns")).find(".owl-carousel").owlCarousel("destroy"),s=u(e),o.empty());o.append(s),n(o.find(".owl-carousel")),_(),r(),c()}),t(document).on("click",".mb2-pb-add-element",function(a){a.preventDefault(),t(".mb2-pb-column").removeClass("mb2-pb-column-active"),t(this).closest(".mb2-pb-column").addClass("mb2-pb-column-active"),r()}),t(document).on("click",".mb2-pb-modal-el",function(a){a.preventDefault();var e=function(a,e,s){var r=t(".mb2-pb-template-"+a).clone();return r.removeClass("mb2-pb-template-"+a),r.attr("data-id",a),"accordion"===a&&h(r),"tabs"===a&&v(r,!1),"carousel"!==a&&"pbmainslider"!==a||f(r),"animnum"===a&&l(r,!0),(e=r.find(".mb2-pb-subelement")).length&&e.attr("data-id",s),r}(t(this).data("id"),t(this).data("subelement"),t(this).data("subelement_name"));t(".mb2-pb-column-active").find(".mb2-pb-sortable-elements").append(e),_(),r(),c()}),t(document).on("click",".settings-element",function(a){a.preventDefault(),y(a),t(this).unbind("click");var e=t(this).closest(".mb2-pb-element").data("id");C(t(this),"element","-"+e)}),t(document).on("click","#save-settings-element",function(t){w("element"),c()}),t(document).on("click",".duplicate-element",function(a){a.preventDefault(),t(this).closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&t(this).closest(".mb2-pb-element").find(".owl-carousel").owlCarousel("destroy");var e=t(this).closest(".mb2-pb-element").clone();t(this).closest(".mb2-pb-element").hasClass("mb2-pb-carousel")&&n(t(this).closest(".mb2-pb-element").find(".owl-carousel")),t(this).closest(".mb2-pb-sortable-elements").append(e),e.hasClass("mb2-pb-accordion")&&h(e),e.hasClass("mb2-pb-tabs")&&v(e,!0),e.hasClass("mb2-pb-carousel")&&f(e),r(),c()}),t(document).on("click",".remove-element",function(e){e.preventDefault(),confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-element").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-element").remove(),c())}),t(document).on("click",".mb2-pb-add-subelement",function(t){t.preventDefault(),r(),c()}),t(document).on("click",".settings-subelement",function(a){a.preventDefault(),y(a);var e,s,r=t(this).closest(".mb2-pb-element").data("id");if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-tabs_item"))g(t(this).closest(".theme-tabs").find(".nav-link"),t(this).closest(".mb2-pb-subelement").find(".nav-link"));else if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-accordion_item")){var o=t(this).closest(".mb2-pb-subelement");(s=(e=o).closest(".mb2-pb-element").find("[data-collapse]")).attr("aria-expanded","false"),s.addClass("collapsed"),e.closest(".mb2-pb-element").find(".collapse").removeClass("show"),e.find("[data-collapse]").attr("aria-expanded","true"),e.find("[data-collapse]").removeClass("collapsed"),e.find(".collapse").addClass("show")}C(t(this),"subelement","-"+r)}),t(document).on("click","#save-settings-subelement",function(){w("subelement"),c()}),t(document).on("click",".duplicate-subelement",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-subelement").clone();if(t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-accordion_item")){var s="accordion_item"+(new Date).getTime();e.find('[data-toggle="collapse"]').attr("data-target","#"+s),e.find('[data-toggle="collapse"]').attr("aria-controls","#"+s),e.find(".collapse").removeClass("show"),e.find(".collapse").attr("id",s)}t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-tabs_item")&&function(t,a){var e=(new Date).getTime(),s=t.closest(".mb2-pb-subelement").find(".nav-link"),r=a.find(".nav-link"),o=s.closest(".mb2-pb-tabs").find('[id="'+s.attr("aria-controls")+'"]').clone();r.attr("href","#tab-"+e),r.attr("aria-controls","tab-"+e),o.attr("id","tab-"+e),o.attr("aria-labelledby","tab-"+e),s.closest(".mb2-pb-tabs").find(".tab-content").append(o),g(s,r)}(t(this),e),t(this).closest(".mb2-pb-subelement").hasClass("mb2-pb-carousel_item")&&function(t,a){var e=(new Date).getTime(),s=t.closest(".mb2-pb-subelement"),r=t.closest(".mb2-pb-element").find(".owl-carousel");r.owlCarousel("destroy");var o=t.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]').clone();a.attr("data-pbid",e),o.attr("data-pbid",e),r.append(o),n(r)}(t(this),e),t(this).closest(".mb2-pb-sortable-subelements").append(e),r(),c()}),t(document).on("click",".remove-subelement",function(e){if(e.preventDefault(),1!=t(this).closest(".mb2-pb-element").find(".mb2-pb-subelement").length){if(confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-subelement").attr("data-elname")+"?")){var s=t(this).closest(".mb2-pb-subelement");if(s.hasClass("mb2-pb-carousel_item")){var r=s.closest(".mb2-pb-element").find(".owl-carousel");r.owlCarousel("destroy"),s.closest(".mb2-pb-element").find('.mb2-pb-carousel-item[data-pbid="'+s.attr("data-pbid")+'"]').remove(),n(r)}s.remove(),c()}}else alert(a.data("cannotremove"))}),t(document).on("click",".settings-section",function(a){a.preventDefault(),y(a),C(t(this),"section","")}),t(document).on("click",".duplicate-section",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-section").clone();t(this).closest(".mb2-pb-sortable-sections").append(e),r(),c()}),t(document).on("click","#save-settings-section",function(){w("section"),c()}),t(document).on("click",".remove-section",function(e){e.preventDefault(),1!=t(this).closest(".mb2-pb-container").find(".mb2-pb-section").length?confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-section").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-section").remove(),c()):alert(a.data("cannotremove"))}),t(document).on("click",".settings-row",function(a){y(a),C(t(this),"row",""),a.preventDefault()}),t(document).on("click",".duplicate-row",function(a){a.preventDefault();var e=t(this).closest(".mb2-pb-row").clone();t(this).closest(".mb2-pb-sortable-rows").append(e),r(),c()}),t(document).on("click","#save-settings-row",function(){w("row"),c()}),t(document).on("click",".remove-row",function(e){e.preventDefault(),confirm(a.data("remove")+": "+t(this).closest(".mb2-pb-row").attr("data-elname")+"?")&&(t(this).closest(".mb2-pb-row").remove(),c())}),t(document).on("click",".settings-column",function(a){y(a),C(t(this),"column",""),a.preventDefault()}),t(document).on("click","#save-settings-column",function(){w("column"),c()}),t(document).on("click",".element-items",function(a){a.preventDefault(),t(this).closest(".mb2-pb-element").find(".mb2-pb-sortable-subelements").slideToggle(250)})});
